!function(){"use strict";var e="";const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_disabled",inputErrorClass:"modal__input_type_error"},r=(e,t,r)=>{e.querySelector(`#${t.id}-error`).textContent="",t.classList.remove(r.inputErrorClass)},n=(e,t,r)=>{t?(e.disabled=t,e.classList.add(r.inactiveButtonClass)):(e.disabled=t,e.classList.remove(r.inactiveButtonClass))},o=(e,t,r)=>{(e=>e.some((e=>!e.validity.valid)))(e)?n(t,!0,r):n(t,!1,r)},a=(e,t,n)=>{t.forEach((t=>{r(e,t,n)}))},s=e=>{document.querySelectorAll(e.formSelector).forEach((t=>{((e,t)=>{const n=Array.from(e.querySelectorAll(t.inputSelector)),a=e.querySelector(t.submitButtonSelector);o(n,a,t),n.forEach((s=>{s.addEventListener("input",(function(){((e,t,n)=>{t.validity.valid?r(e,t,n):((e,t,r,n)=>{e.querySelector(`#${t.id}-error`).textContent=r,t.classList.add(n.inputErrorClass)})(e,t,t.validationMessage,n)})(e,s,t),o(n,a,t)}))}))})(t,e)}))};function i(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Save",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Saving...";e.textContent=t?n:r}s(t);var c=e+"d3610e9c6dce3cb370d8.svg",d=e+"d38272e02bb4f1ab1c37.svg",l=e+"40608da7369d39bc1077.svg";const u=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}_request(e,t){return fetch(e,t).then(this._checkResponse)}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}getInitialCards(){return this._request(`${this._baseUrl}/cards`,{headers:this._headers})}getUserInfo(){return this._request(`${this._baseUrl}/users/me`,{headers:this._headers})}editUserInfo(e){let{name:t,about:r}=e;return this._request(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})})}editUserAvatar(e){let{avatar:t}=e;return this._request(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})})}addCard(e){let{name:t,link:r}=e;return this._request(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})})}deleteCard(e){return this._request(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers})}updateLikes(e,t){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"c126eeac-2056-47be-9b3c-8d9b16bc2f4d","Content-Type":"application/json"}});u.getAppInfo().then((e=>{let[t,r]=e;return t.forEach((e=>{M(e)})),r})).then((e=>{m.src=e.avatar,h.textContent=e.name,v.textContent=e.about})).catch(console.error),document.getElementById("spots-logo").src=c;const m=document.getElementById("profile-avatar");document.getElementById("pencil-icon").src=d,document.getElementById("plus-icon").src=l,s(t);const _=document.querySelector(".profile__edit-btn"),h=document.querySelector(".profile__name"),v=document.querySelector(".profile__description"),f=document.querySelector(".profile__avatar-btn"),p=document.querySelector("#edit-avatar-modal"),b=p.querySelector(".modal__submit-btn"),y=p.querySelector("#profile-avatar-input"),S=document.forms["edit-profile-avatar"],q=document.querySelector("#edit-profile-modal"),g=q.querySelector("#profile-name-input"),E=q.querySelector("#profile-description-input"),L=document.forms["edit-profile"],k=document.querySelector(".profile__add-btn"),C=document.querySelector("#add-card-modal"),U=C.querySelector(".modal__submit-btn"),x=C.querySelector("#add-card-link-input"),I=C.querySelector("#add-card-name-input"),$=document.forms["edit-card"],D=document.querySelector("#card-template"),A=document.querySelector(".cards__list"),B=document.querySelector("#preview-modal"),T=B.querySelector(".modal__caption"),P=B.querySelector(".modal__image"),w=document.querySelector("#delete-modal"),N=document.forms["delete-form"];let O,j;function J(e){const t=e.target;P.src=t.src,P.alt=t.alt,T.textContent=t.alt,R(B)}function H(e){"Escape"===e.key&&z(document.querySelector(".modal_opened"))}function R(e){document.addEventListener("keydown",H),e.classList.add("modal_opened")}function z(e){document.removeEventListener("keydown",H),e.classList.remove("modal_opened")}function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"prepend";const r=function(e){const t=D.content.querySelector(".card").cloneNode(!0),r=t.querySelector(".card__title"),n=t.querySelector(".card__image"),o=t.querySelector(".card__like-btn");return e.isLiked&&o.classList.toggle("card__like-btn_liked"),r.textContent=e.name,n.src=e.link,n.alt=e.name,n.addEventListener("click",J),o.addEventListener("click",(t=>function(e,t){const r=e.target.classList.contains("card__like-btn_liked");u.updateLikes(t,r).then((()=>{e.target.classList.toggle("card__like-btn_liked")})).catch(console.error)}(t,e._id))),t.querySelector(".card__delete-btn").addEventListener("click",(()=>function(e,t){O=e,j=t,R(w)}(t,e._id))),t}(e);A[t](r)}_.addEventListener("click",(()=>{g.value=h.textContent,E.value=v.textContent,a(q,[g,E],t),R(q)})),L.addEventListener("submit",(function(e){e.preventDefault();const t=e.submitter;i(t,!0),u.editUserInfo({name:g.value,about:E.value}).then((e=>{h.textContent=e.name,v.textContent=e.about,z(q)})).catch(console.error).finally((()=>{i(t,!1)}))})),S.addEventListener("submit",(function(e){e.preventDefault();const r=e.submitter;i(r,!0),u.editUserAvatar({avatar:y.value}).then((r=>{m.src=r.avatar,n(b,!0,t),e.target.reset(),z(p)})).catch(console.error).finally((()=>{i(r,!1)}))})),k.addEventListener("click",(()=>{R(C)})),N.addEventListener("submit",(function(e){e.preventDefault();const t=e.submitter;"Delete"===t.textContent.trim()&&(i(t,!0,"Delete","Deleting..."),u.deleteCard(j).then((()=>{O.remove(),z(w),O=void 0,j=void 0})).catch(console.error).finally((()=>{i(t,!1,"Delete","Deleting...")})))})),f.addEventListener("click",(()=>{y.value="",a(p,[y],t),R(p)})),$.addEventListener("submit",(function(e){e.preventDefault();const r=e.submitter;i(r,!0);const o={link:x.value,name:I.value};u.addCard(o).then((r=>{M(r),n(U,!0,t),e.target.reset(),z(C)})).catch(console.error).finally((()=>{i(r,!1)}))})),document.querySelectorAll(".modal").forEach((e=>{e.addEventListener("mousedown",(t=>{t.target.classList.contains("modal_opened")&&z(e),t.target.classList.contains("modal__close-btn")&&z(e)}))}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SCxFQUFjdUgsR0FBVyxHQUV6QixNQUFNbkUsRUFBTyxDQUNYUCxLQUFNa0MsRUFBWXNDLE1BQ2xCbkYsS0FBTThDLEVBQVlxQyxPQUdwQjdHLEVBQ0dtQyxRQUFRUyxHQUNSekIsTUFBTWlHLElBQ0x2RSxFQUFXdUUsR0FFWHJKLEVBQWN1RyxHQUFrQixFQUFNdEgsR0FDdENvSSxFQUFNRSxPQUFPNEIsUUFFYnZCLEVBQVd0QixFQUFhLElBRXpCbkIsTUFBTUMsUUFBUUMsT0FDZDZELFNBQVEsS0FDUHpILEVBQWN1SCxHQUFXLEVBQU0sR0FFckMsSUFxRWVqSSxTQUFTQyxpQkFBaUIsVUFHbENILFNBQVNnSCxJQUNkQSxFQUFNekcsaUJBQWlCLGFBQWNpRyxJQUMvQkEsRUFBTUUsT0FBT3pILFVBQVUySSxTQUFTLGlCQUNsQ2IsRUFBV0MsR0FFVFIsRUFBTUUsT0FBT3pILFVBQVUySSxTQUFTLHFCQUNsQ2IsRUFBV0MsRUFDYixHQUNBLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy9oZWxwZXJzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ0blwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnRuX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiXG59XG5cbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG5cbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG59O1xuXG5jb25zdCBoaWRlSW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG5cbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG59O1xuXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKXtcbiAgICBzaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UsIGNvbmZpZyk7XG4gIH0gZWxzZSB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgfVxufTtcblxuY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoaW5wdXQgPT4ge1xuICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XG4gIH0pO1xufTtcblxuY29uc3QgZGlzYWJsZUJ1dHRvbiA9IChidXR0b25FbGVtZW50LCBkaXNhYmxlLCBjb25maWcpID0+IHtcbiAgaWYoZGlzYWJsZSkge1xuICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBkaXNhYmxlO1xuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH0gZWxzZSB7XG4gICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGRpc2FibGU7XG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgfVxufTtcblxuY29uc3QgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpID0+IHtcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCB0cnVlLCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGRpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCwgZmFsc2UsIGNvbmZpZyk7XG4gIH1cbn07XG5cbmNvbnN0IHJlc2V0VmFsaWRhdGlvbiA9IChmb3JtRWxlbWVudCwgaW5wdXRMaXN0LCBjb25maWcpID0+IHtcbiAgaW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dCwgY29uZmlnKTtcbiAgfSk7XG59O1xuXG5jb25zdCBzZXRFdmVudExpc3RlbmVycyA9IChmb3JtRWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuXG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpO1xuXG4gIGZvcm1MaXN0LmZvckVhY2goZm9ybUVsZW1lbnQgPT4ge1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCBjb25maWcpO1xuICB9KTtcbn07XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuZXhwb3J0IHtlbmFibGVWYWxpZGF0aW9uLCByZXNldFZhbGlkYXRpb24sIGRpc2FibGVCdXR0b24sIHNldHRpbmdzfTsiLCJmdW5jdGlvbiBzZXRCdXR0b25UZXh0KGJ0biwgaXNMb2FkaW5nLCBkZWZhdWx0VGV4dCA9IFwiU2F2ZVwiLCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcclxuICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICBidG4udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcclxuICB9IGVsc2Uge1xyXG4gICAgYnRuLnRleHRDb250ZW50ID0gZGVmYXVsdFRleHQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBzZXRCdXR0b25UZXh0IH07XHJcbiIsImltcG9ydCB7XHJcbiAgZW5hYmxlVmFsaWRhdGlvbixcclxuICByZXNldFZhbGlkYXRpb24sXHJcbiAgZGlzYWJsZUJ1dHRvbixcclxuICBzZXR0aW5ncyxcclxufSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7XHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IHNldEJ1dHRvblRleHQgfSBmcm9tIFwiLi4vdXRpbHMvaGVscGVycy5qc1wiO1xyXG5pbXBvcnQgc3BvdHNMb2dvU3JjIGZyb20gXCIuLi9pbWFnZXMvbG9nby5zdmdcIjtcclxuaW1wb3J0IHBlbmNpbEljb25TcmMgZnJvbSBcIi4uL2ltYWdlcy9wZW5jaWwuc3ZnXCI7XHJcbmltcG9ydCBwbHVzSWNvblNyYyBmcm9tIFwiLi4vaW1hZ2VzL3BsdXMuc3ZnXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiYzEyNmVlYWMtMjA1Ni00N2JlLTliM2MtOGQ5YjE2YmMyZjRkXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmFwaVxyXG4gIC5nZXRBcHBJbmZvKClcclxuICAudGhlbigoW2NhcmRzLCB1c2VyXSkgPT4ge1xyXG4gICAgY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xyXG4gICAgICByZW5kZXJDYXJkKGNhcmQpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdXNlcjtcclxuICB9KVxyXG4gIC50aGVuKCh1c2VyKSA9PiB7XHJcbiAgICBwcm9maWxlQXZhdGFyLnNyYyA9IHVzZXIuYXZhdGFyO1xyXG4gICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSB1c2VyLm5hbWU7XHJcbiAgICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB1c2VyLmFib3V0O1xyXG4gIH0pXHJcbiAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG5cclxuY29uc3QgbG9nb0ltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcG90cy1sb2dvXCIpO1xyXG5sb2dvSW1hZ2Uuc3JjID0gc3BvdHNMb2dvU3JjO1xyXG5jb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlLWF2YXRhclwiKTtcclxuY29uc3QgcGVuY2lsSWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGVuY2lsLWljb25cIik7XHJcbnBlbmNpbEljb24uc3JjID0gcGVuY2lsSWNvblNyYztcclxuY29uc3QgcGx1c0ljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsdXMtaWNvblwiKTtcclxucGx1c0ljb24uc3JjID0gcGx1c0ljb25TcmM7XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcclxuXHJcbi8vIFByb2ZpbGVcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuXHJcbi8vIEVkaXQgUHJvZmlsZSBBdmF0YXIgQnV0dG9uXHJcbmNvbnN0IHByb2ZpbGVBdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1idG5cIik7XHJcblxyXG4vLyBFZGl0IFByb2ZpbGUgQXZhdGFyXHJcbmNvbnN0IGVkaXRBdmF0YXJNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1hdmF0YXItbW9kYWxcIik7XHJcbmNvbnN0IGF2YXRhclN1Ym1pdEJ0biA9IGVkaXRBdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXQtYnRuXCIpO1xyXG5jb25zdCBhdmF0YXJMaW5rID0gZWRpdEF2YXRhck1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hdmF0YXItaW5wdXRcIik7XHJcbmNvbnN0IGF2YXRhckZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZm9ybXNbXCJlZGl0LXByb2ZpbGUtYXZhdGFyXCJdO1xyXG5cclxuLy8gRWRpdCBQcm9maWxlIE1vZGFsXHJcbmNvbnN0IGVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLW1vZGFsXCIpO1xyXG5jb25zdCBwcm9maWxlTW9kYWxOYW1lID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xyXG5jb25zdCBwcm9maWxlTW9kYWxEZXNjcmlwdGlvbiA9IGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxyXG4pO1xyXG5jb25zdCBwcm9maWxlRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5mb3Jtc1tcImVkaXQtcHJvZmlsZVwiXTtcclxuXHJcbi8vIE5ldyBQb3N0IEJ1dHRvblxyXG5jb25zdCBuZXdQb3N0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuXCIpO1xyXG5cclxuLy8gTmV3IFBvc3QgTW9kYWxcclxuY29uc3QgbmV3UG9zdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcclxuY29uc3QgbmV3UG9zdFN1Ym1pdEJ0biA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXQtYnRuXCIpO1xyXG5jb25zdCBuZXdQb3N0TGluayA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWxpbmstaW5wdXRcIik7XHJcbmNvbnN0IG5ld1Bvc3ROYW1lID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbmFtZS1pbnB1dFwiKTtcclxuY29uc3QgbmV3UG9zdEZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZm9ybXNbXCJlZGl0LWNhcmRcIl07XHJcblxyXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIik7XHJcbmNvbnN0IGNhcmRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcblxyXG4vLyBQcmV2aWV3IE1vZGFsXHJcbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcclxuY29uc3QgcHJldmlld01vZGFsQ2FwdGlvbiA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xyXG5jb25zdCBwcmV2aWV3TW9kYWxJbWFnZSA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuXHJcbi8vIERlbGV0ZSBNb2RhbFxyXG5jb25zdCBkZWxldGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVsZXRlLW1vZGFsXCIpO1xyXG5jb25zdCBkZWxldGVGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJkZWxldGUtZm9ybVwiXTtcclxuXHJcbmxldCBzZWxlY3RlZENhcmQsIHNlbGVjdGVkQ2FyZElkO1xyXG5cclxuZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNvbnRlbnRcclxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gIGNvbnN0IGNhcmROYW1lRWxlbWVudCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgY29uc3QgY2FyZEltYWdlRWxlbWVudCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgY29uc3QgY2FyZExpa2VCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnRuXCIpO1xyXG5cclxuICBpZiAoZGF0YS5pc0xpa2VkKSB7XHJcbiAgICBjYXJkTGlrZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idG5fbGlrZWRcIik7XHJcbiAgfVxyXG5cclxuICBjYXJkTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgY2FyZEltYWdlRWxlbWVudC5zcmMgPSBkYXRhLmxpbms7XHJcbiAgY2FyZEltYWdlRWxlbWVudC5hbHQgPSBkYXRhLm5hbWU7XHJcblxyXG4gIGNhcmRJbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZU9wZW5QcmV2aWV3KTtcclxuICBjYXJkTGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PlxyXG4gICAgaGFuZGxlTGlrZWQoZXZlbnQsIGRhdGEuX2lkKVxyXG4gICk7XHJcbiAgY2FyZEVsZW1lbnRcclxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idG5cIilcclxuICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gaGFuZGxlRGVsZXRlQ2FyZChjYXJkRWxlbWVudCwgZGF0YS5faWQpKTtcclxuXHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG4vLyBPcGVucyBtb2RhbCB0byBkZWxldGUgY2FyZCBjYW4gYmUgZWl0aGVyIHN1Ym1pdHRlZCBvciBjYW5jZWxlZFxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDYXJkKGNhcmRFbGVtZW50LCBjYXJkSWQpIHtcclxuICBzZWxlY3RlZENhcmQgPSBjYXJkRWxlbWVudDtcclxuICBzZWxlY3RlZENhcmRJZCA9IGNhcmRJZDtcclxuXHJcbiAgb3Blbk1vZGFsKGRlbGV0ZU1vZGFsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTGlrZWQoZXZlbnQsIGNhcmRJZCkge1xyXG4gIGNvbnN0IGlzTGlrZWQgPSBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9fbGlrZS1idG5fbGlrZWRcIik7XHJcblxyXG4gIGFwaVxyXG4gICAgLnVwZGF0ZUxpa2VzKGNhcmRJZCwgaXNMaWtlZClcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ0bl9saWtlZFwiKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZU9wZW5QcmV2aWV3KGV2ZW50KSB7XHJcbiAgY29uc3QgcHJldmlld0ltYWdlID0gZXZlbnQudGFyZ2V0O1xyXG5cclxuICBwcmV2aWV3TW9kYWxJbWFnZS5zcmMgPSBwcmV2aWV3SW1hZ2Uuc3JjO1xyXG4gIHByZXZpZXdNb2RhbEltYWdlLmFsdCA9IHByZXZpZXdJbWFnZS5hbHQ7XHJcbiAgcHJldmlld01vZGFsQ2FwdGlvbi50ZXh0Q29udGVudCA9IHByZXZpZXdJbWFnZS5hbHQ7XHJcblxyXG4gIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVFc2NDbG9zZShldmVudCkge1xyXG4gIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgIGNvbnN0IG9wZW5lZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XHJcbiAgICBjbG9zZU1vZGFsKG9wZW5lZE1vZGFsKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY0Nsb3NlKTtcclxuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XHJcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjQ2xvc2UpO1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2ZW50KSB7XHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgY29uc3Qgc3VibWl0QnRuID0gZXZlbnQuc3VibWl0dGVyO1xyXG4gIHNldEJ1dHRvblRleHQoc3VibWl0QnRuLCB0cnVlKTtcclxuXHJcbiAgYXBpXHJcbiAgICAuZWRpdFVzZXJJbmZvKHtcclxuICAgICAgbmFtZTogcHJvZmlsZU1vZGFsTmFtZS52YWx1ZSxcclxuICAgICAgYWJvdXQ6IHByb2ZpbGVNb2RhbERlc2NyaXB0aW9uLnZhbHVlLFxyXG4gICAgfSlcclxuICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xyXG5cclxuICAgICAgY2xvc2VNb2RhbChlZGl0TW9kYWwpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBzZXRCdXR0b25UZXh0KHN1Ym1pdEJ0biwgZmFsc2UpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQoZXZlbnQpIHtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICBjb25zdCBzdWJtaXRCdG4gPSBldmVudC5zdWJtaXR0ZXI7XHJcbiAgc2V0QnV0dG9uVGV4dChzdWJtaXRCdG4sIHRydWUpO1xyXG5cclxuICBhcGlcclxuICAgIC5lZGl0VXNlckF2YXRhcih7IGF2YXRhcjogYXZhdGFyTGluay52YWx1ZSB9KVxyXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgcHJvZmlsZUF2YXRhci5zcmMgPSBkYXRhLmF2YXRhcjtcclxuXHJcbiAgICAgIGRpc2FibGVCdXR0b24oYXZhdGFyU3VibWl0QnRuLCB0cnVlLCBzZXR0aW5ncyk7XHJcbiAgICAgIGV2ZW50LnRhcmdldC5yZXNldCgpO1xyXG4gICAgICBjbG9zZU1vZGFsKGVkaXRBdmF0YXJNb2RhbCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHNldEJ1dHRvblRleHQoc3VibWl0QnRuLCBmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTmV3UG9zdEZvcm1TdWJtaXQoZXZlbnQpIHtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICBjb25zdCBzdWJtaXRCdG4gPSBldmVudC5zdWJtaXR0ZXI7XHJcbiAgc2V0QnV0dG9uVGV4dChzdWJtaXRCdG4sIHRydWUpO1xyXG5cclxuICBjb25zdCBjYXJkID0ge1xyXG4gICAgbGluazogbmV3UG9zdExpbmsudmFsdWUsXHJcbiAgICBuYW1lOiBuZXdQb3N0TmFtZS52YWx1ZSxcclxuICB9O1xyXG5cclxuICBhcGlcclxuICAgIC5hZGRDYXJkKGNhcmQpXHJcbiAgICAudGhlbigoY2FyZEZyb21BcGkpID0+IHtcclxuICAgICAgcmVuZGVyQ2FyZChjYXJkRnJvbUFwaSk7XHJcblxyXG4gICAgICBkaXNhYmxlQnV0dG9uKG5ld1Bvc3RTdWJtaXRCdG4sIHRydWUsIHNldHRpbmdzKTtcclxuICAgICAgZXZlbnQudGFyZ2V0LnJlc2V0KCk7XHJcblxyXG4gICAgICBjbG9zZU1vZGFsKG5ld1Bvc3RNb2RhbCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHNldEJ1dHRvblRleHQoc3VibWl0QnRuLCBmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gSGFuZGxlcyBEZWxldGUgRm9ybSBTdWJtaXNzaW9uXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZVN1Ym1pdChldmVudCkge1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gIGNvbnN0IHN1Ym1pdEJ0biA9IGV2ZW50LnN1Ym1pdHRlcjtcclxuXHJcbiAgaWYgKHN1Ym1pdEJ0bi50ZXh0Q29udGVudC50cmltKCkgPT09IFwiRGVsZXRlXCIpIHtcclxuICAgIHNldEJ1dHRvblRleHQoc3VibWl0QnRuLCB0cnVlLCBcIkRlbGV0ZVwiLCBcIkRlbGV0aW5nLi4uXCIpO1xyXG5cclxuICAgIGFwaVxyXG4gICAgICAuZGVsZXRlQ2FyZChzZWxlY3RlZENhcmRJZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHNlbGVjdGVkQ2FyZC5yZW1vdmUoKTtcclxuICAgICAgICBjbG9zZU1vZGFsKGRlbGV0ZU1vZGFsKTtcclxuXHJcbiAgICAgICAgc2VsZWN0ZWRDYXJkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHNlbGVjdGVkQ2FyZElkID0gdW5kZWZpbmVkO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHNldEJ1dHRvblRleHQoc3VibWl0QnRuLCBmYWxzZSwgXCJEZWxldGVcIiwgXCJEZWxldGluZy4uLlwiKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGl0ZW0sIG1ldGhvZCA9IFwicHJlcGVuZFwiKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChpdGVtKTtcclxuICBjYXJkc0xpc3RbbWV0aG9kXShjYXJkRWxlbWVudCk7XHJcbn1cclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcHJvZmlsZU1vZGFsTmFtZS52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xyXG4gIHByb2ZpbGVNb2RhbERlc2NyaXB0aW9uLnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xyXG5cclxuICByZXNldFZhbGlkYXRpb24oXHJcbiAgICBlZGl0TW9kYWwsXHJcbiAgICBbcHJvZmlsZU1vZGFsTmFtZSwgcHJvZmlsZU1vZGFsRGVzY3JpcHRpb25dLFxyXG4gICAgc2V0dGluZ3NcclxuICApO1xyXG5cclxuICBvcGVuTW9kYWwoZWRpdE1vZGFsKTtcclxufSk7XHJcblxyXG5wcm9maWxlRm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XHJcblxyXG5hdmF0YXJGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQpO1xyXG5cclxubmV3UG9zdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIG9wZW5Nb2RhbChuZXdQb3N0TW9kYWwpO1xyXG59KTtcclxuXHJcbmRlbGV0ZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVEZWxldGVTdWJtaXQpO1xyXG5cclxucHJvZmlsZUF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGF2YXRhckxpbmsudmFsdWUgPSBcIlwiO1xyXG5cclxuICByZXNldFZhbGlkYXRpb24oXHJcbiAgICBlZGl0QXZhdGFyTW9kYWwsXHJcbiAgICBbYXZhdGFyTGlua10sXHJcbiAgICBzZXR0aW5nc1xyXG4gICk7XHJcblxyXG4gIG9wZW5Nb2RhbChlZGl0QXZhdGFyTW9kYWwpO1xyXG59KTtcclxuXHJcbm5ld1Bvc3RGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZU5ld1Bvc3RGb3JtU3VibWl0KTtcclxuXHJcbmNvbnN0IG1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIik7XHJcblxyXG4vLyBhZGQgZXZlbnQgbGlzdGVuZXIgdG8gY2xvc2UgbW9kYWxzXHJcbm1vZGFscy5mb3JFYWNoKChtb2RhbCkgPT4ge1xyXG4gIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2ZW50KSA9PiB7XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xyXG4gICAgICBjbG9zZU1vZGFsKG1vZGFsKTtcclxuICAgIH1cclxuICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlLWJ0blwiKSkge1xyXG4gICAgICBjbG9zZU1vZGFsKG1vZGFsKTtcclxuICAgIH1cclxuICB9KTtcclxufSk7XHJcbiIsImNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICBfcmVxdWVzdCh1cmwsIG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBmZXRjaCh1cmwsIG9wdGlvbnMpLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRBcHBJbmZvKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlZGl0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZWRpdFVzZXJBdmF0YXIoeyBhdmF0YXIgfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcixcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlTGlrZXMoaWQsIGlzTGlrZWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IGlzTGlrZWQgPyBcIkRFTEVURVwiIDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXBpO1xyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImhpZGVJbnB1dEVycm9yIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJjb25maWciLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImRpc2FibGVCdXR0b24iLCJidXR0b25FbGVtZW50IiwiZGlzYWJsZSIsImRpc2FibGVkIiwiYWRkIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJzb21lIiwiaW5wdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaGFzSW52YWxpZElucHV0IiwicmVzZXRWYWxpZGF0aW9uIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzZXRFdmVudExpc3RlbmVycyIsIkFycmF5IiwiZnJvbSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJzaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZSIsInZhbGlkYXRpb25NZXNzYWdlIiwic2V0QnV0dG9uVGV4dCIsImJ0biIsImlzTG9hZGluZyIsImRlZmF1bHRUZXh0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwibG9hZGluZ1RleHQiLCJhcGkiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJiYXNlVXJsIiwiaGVhZGVycyIsInRoaXMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiX3JlcXVlc3QiLCJ1cmwiLCJvcHRpb25zIiwiZmV0Y2giLCJ0aGVuIiwiZ2V0QXBwSW5mbyIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiZWRpdFVzZXJJbmZvIiwiX3JlZjIiLCJuYW1lIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImVkaXRVc2VyQXZhdGFyIiwiX3JlZjMiLCJhdmF0YXIiLCJhZGRDYXJkIiwiX3JlZjQiLCJsaW5rIiwiZGVsZXRlQ2FyZCIsInVwZGF0ZUxpa2VzIiwiaXNMaWtlZCIsImF1dGhvcml6YXRpb24iLCJjYXJkcyIsInVzZXIiLCJjYXJkIiwicmVuZGVyQ2FyZCIsInByb2ZpbGVBdmF0YXIiLCJzcmMiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsImNhdGNoIiwiY29uc29sZSIsImVycm9yIiwiZ2V0RWxlbWVudEJ5SWQiLCJzcG90c0xvZ29TcmMiLCJwZW5jaWxJY29uU3JjIiwicGx1c0ljb25TcmMiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVBdmF0YXJCdXR0b24iLCJlZGl0QXZhdGFyTW9kYWwiLCJhdmF0YXJTdWJtaXRCdG4iLCJhdmF0YXJMaW5rIiwiYXZhdGFyRm9ybUVsZW1lbnQiLCJmb3JtcyIsImVkaXRNb2RhbCIsInByb2ZpbGVNb2RhbE5hbWUiLCJwcm9maWxlTW9kYWxEZXNjcmlwdGlvbiIsInByb2ZpbGVGb3JtRWxlbWVudCIsIm5ld1Bvc3RCdXR0b24iLCJuZXdQb3N0TW9kYWwiLCJuZXdQb3N0U3VibWl0QnRuIiwibmV3UG9zdExpbmsiLCJuZXdQb3N0TmFtZSIsIm5ld1Bvc3RGb3JtRWxlbWVudCIsImNhcmRUZW1wbGF0ZSIsImNhcmRzTGlzdCIsInByZXZpZXdNb2RhbCIsInByZXZpZXdNb2RhbENhcHRpb24iLCJwcmV2aWV3TW9kYWxJbWFnZSIsImRlbGV0ZU1vZGFsIiwiZGVsZXRlRm9ybSIsInNlbGVjdGVkQ2FyZCIsInNlbGVjdGVkQ2FyZElkIiwiaGFuZGxlT3BlblByZXZpZXciLCJldmVudCIsInByZXZpZXdJbWFnZSIsInRhcmdldCIsImFsdCIsIm9wZW5Nb2RhbCIsImhhbmRsZUVzY0Nsb3NlIiwia2V5IiwiY2xvc2VNb2RhbCIsIm1vZGFsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIml0ZW0iLCJjYXJkRWxlbWVudCIsImRhdGEiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2FyZE5hbWVFbGVtZW50IiwiY2FyZEltYWdlRWxlbWVudCIsImNhcmRMaWtlQnRuIiwidG9nZ2xlIiwiY2FyZElkIiwiY29udGFpbnMiLCJoYW5kbGVMaWtlZCIsIl9pZCIsImhhbmRsZURlbGV0ZUNhcmQiLCJnZXRDYXJkRWxlbWVudCIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJzdWJtaXRCdG4iLCJzdWJtaXR0ZXIiLCJmaW5hbGx5IiwicmVzZXQiLCJ0cmltIiwiY2FyZEZyb21BcGkiXSwic291cmNlUm9vdCI6IiJ9